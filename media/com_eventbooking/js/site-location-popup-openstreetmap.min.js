!function(i,r){r(i).ready(function(){var e=Joomla.getOptions("coordinates"),a=Joomla.getOptions("zoomLevel"),o=Joomla.getOptions("baseUri"),t=L.map("map-canvas",{center:[e[0],e[1]],zoom:a,zoomControl:!0,attributionControl:!1,scrollWheelZoom:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{id:"mapbox.streets"}).addTo(t);var n=L.marker([e[0],e[1]],{draggable:!1}).addTo(t);r("#address").autocomplete({serviceUrl:o+"/index.php?option=com_eventbooking&task=location.search",minChars:3,onSelect:function(e){var a=i.adminForm;e.name&&""===a.name.value&&(a.name.value=e.name),e.coordinates&&(a.coordinates.value=e.coordinates),e.city&&r("#city").val(e.city),e.state&&r("#state").val(e.state);var o=L.latLng(e.lat,e.long);n.setLatLng(o),t.panTo(o)}}),r("#adminForm").validationEngine("attach",{onValidationComplete:function(e,a){return 1==a&&r.ajax({type:"POST",data:r("#adminForm input[type='radio']:checked, #adminForm input[type='checkbox']:checked, #adminForm input[type='text'], #adminForm input[type='hidden'],  #adminForm select"),dataType:"json",url:o+"/index.php?option=com_eventbooking&task=location.save_ajax",beforeSend:function(){r("#save_location").prop("disabled",!0)},success:function(e){r("#adminForm").before('<div class="alert alert-success"><h4 class="alert-heading">Message</h4><div class="alert-message">'+e.message+"</div></div>"),r("#save_location").prop("disabled",!1);var a=parent.jQuery;a("#location_id").append(a("<option>",{value:e.id,text:e.name})),a("#location_id").val(e.id),a.colorbox.close(),a("#location_id").trigger("liszt:updated")}}),!1}})})}(document,Eb.jQuery);